
<html>
<head>
  <meta charset="utf-8">
  <title>Mocha Tests</title>
  <link rel="stylesheet"
    href="http://nathansuniversity.com/css/mocha.css" />
  <script src=
    "http://nathansuniversity.com/js/jquery-1.7.1.min.js">
  </script>
  <script src=
    "http://nathansuniversity.com/js/chai.js">
  </script>
  <script src="http://nathansuniversity.com/js/mocha.js">
  
  </script>
<<<<<<< HEAD
  <script src="EvalScheemWeb.js"></script>
=======
  <script src="EvalScheem.js"></script>
>>>>>>> gh-pages
  <script src="parser.js"></script>
  <script>      mocha.setup('tdd')</script>
  <script>
      var assert = chai.assert;
      function evalScheemString(scheemString, env) {
          var Tokens = SCHEEM.parse(scheemString);
          return evalScheem(Tokens, env); 
      }
      // A half-baked implementation of evalScheem
<<<<<<< HEAD

      // Some unit tests
      
      suite('Lambda tests', function () {


          test('Basic identity', function () {
              evalScheem([['lambda', ['x'], 'x'], 5], {})
          }, 5);


          test('+1', function () {
              evalScheem([['lambda', ['x'], ['+', 'x', 1]], 5], {})
          }, 6);


          test('closure', function () {
              evalScheem([[['lambda', ['x'], ['lambda', 'y', ['+', 'x', 'y']]], 5], 3], {})
          }, 8);

          test('2 val test', function (){
            assert.deepEqual(evalScheem(
                        ['define', 'x', 
                            ['lambda', ['left', 'right'], ['+', 'left', 'right']]
                        ])
          
          }

      });



      /*
      suite('quote', function () {
              test('a number', function () {
=======
      
      // Some unit tests

      suite('quote', function () {
          test('a number', function () {
>>>>>>> gh-pages
              assert.deepEqual(
            evalScheem(['quote', 3], {}),
            3
        );
          });
          test('an atom', function () {
              assert.deepEqual(
            evalScheem(['quote', 'dog'], {}),
            'dog'
        );
          });
          test('a list', function () {
              assert.deepEqual(
            evalScheem(['quote', [1, 2, 3]], {}),
            [1, 2, 3]
        );
          });
      });
      suite('add', function () {
          test('two numbers', function () {
              assert.deepEqual(
            evalScheem(['+', 3, 5], {}),
            8
        );
          });
          test('a number and an expression', function () {
              assert.deepEqual(
            evalScheem(['+', 3, ['+', 2, 2]], {}),
            7
        );
          });
          test('a dog and a cat', function () {
              assert.deepEqual(evalScheem(['+', 'dog', 'cat'], {}),42);
          });
      });
      
      suite('math asserts', function(){
            test('a dog and a cat add', function ()     {assert.throws(function () { evalScheem(['+', 'dog', 'cat'], {}); }); });
            test('a dog and a cat Mult', function () { assert.throws(function () { evalScheem(['*', 'dog', 'cat'], {}); }); });
            test('a dog and a cat sub', function () { assert.throws(function () { evalScheem(['-', 'dog', 'cat'], {}); }); });
            test('a dog and a cat div', function () { assert.throws(function () { evalScheem(['/', 'dog', 'cat'], {}); }); });

            test('a dog and a cat and a ferret add', function () { assert.throws(function () { evalScheem(['+', 'dog', 'cat', 'ferret'], {}); }); });
            test('a dog and a cat  and a ferret  Mult', function () { assert.throws(function () { evalScheem(['*', 'dog', 'cat', 'ferret'], {}); }); });
            test('a dog and a cat  and a ferret  sub', function () { assert.throws(function () { evalScheem(['-', 'dog', 'cat', 'ferret'], {}); }); });
            test('a dog and a cat  and a ferret  div', function () { assert.throws(function () { evalScheem(['/', 'dog', 'cat', 'ferret'], {}); }); });

        });

        suite('math asserts', function () {
            test('a dog and a cat add', function () { assert.throws(function () { evalScheem(['+', 'dog', 'cat'], {}); }); });
            test('a dog and a cat Mult', function () { assert.throws(function () { evalScheem(['*', 'dog', 'cat'], {}); }); });
            test('a dog and a cat sub', function () { assert.throws(function () { evalScheem(['-', 'dog', 'cat'], {}); }); });
            test('a dog and a cat div', function () { assert.throws(function () { evalScheem(['/', 'dog', 'cat'], {}); }); });

            test('a dog and a cat and a ferret add', function () { assert.throws(function () { evalScheem(['+', 'dog', 'cat', 'ferret'], {}); }); });
            test('a dog and a cat  and a ferret  Mult', function () { assert.throws(function () { evalScheem(['*', 'dog', 'cat', 'ferret'], {}); }); });
            test('a dog and a cat  and a ferret  sub', function () { assert.throws(function () { evalScheem(['-', 'dog', 'cat', 'ferret'], {}); }); });
            test('a dog and a cat  and a ferret  div', function () { assert.throws(function () { evalScheem(['/', 'dog', 'cat', 'ferret'], {}); }); });

        });

        suite('parse', function () {
            test('a number', function () {
                assert.deepEqual(
            SCHEEM.parse('42'),
            42
        );
            });
            test('a variable', function () {
                assert.deepEqual(
            SCHEEM.parse('x'),
            'x'
        );
            });
        });


        suite('Eval and interpret', function () {
              test('40 + 2', function () {
                  assert.deepEqual(evalScheemString('(+ 40 2)', {}),42);
              });
              test('Stuff nested', function () {
                  assert.deepEqual(evalScheemString('(+ (* 10 4) 2)', {}), 42);
              });
<<<<<<< HEAD

          });

          var always3 = function (x) { return 3; };
          var identity = function (x) { return x; };
          var plusone = function (x) { return x + 1; };
          var add = function (x, y) { return x + y; };
          var factorial = function (x) {
              if (x === 1) {
                  return x;
              }
              else {
                  return x * factorial(x - 1);
              }
          };
          var env = {
              bindings: { 'always3': always3,
                  'identity': identity,
                  'plusone': plusone,
                  'add': add,
                  'factorial': factorial
              }, outer: {}
          };

          suite('Function Tests', function () {
              test('always 3', function () {
                  assert.deepEqual(evalScheem(['always3', [5]], env), 3);
              });
              test('plus one', function () {
                  assert.deepEqual(evalScheem(['add', [5, 2]], env), 7);
              });
               test('factorial', function () {
                  assert.deepEqual(evalScheem(['factorial', [5]], env), 120);
              });

          });

          */

          //alert(lookup(env, 'always3'));
=======
            
        });


>>>>>>> gh-pages
  </script>
  <script>
      $(function () {
          mocha.run();
      });
  </script>
</head>
<body>
  <div id="mocha"></div>
</body>
</html>
